(()=>{var e={};e.id=569,e.ids=[569],e.modules={7495:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=7495,e.exports=r},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},4410:(e,r,t)=>{"use strict";t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{POST:()=>p});var o=t(9303),i=t(8716),a=t(670),n=t(7721),u=t(1615),c=t(7070);async function p(e){try{let{name:r,email:t,password:s,userType:o,fitnessGoals:i,specialization:a,experience:p,hourlyRate:l,bio:d}=await e.json(),x=(0,u.cookies)(),m=(0,n.createServerClient)("http://supabasekong-hc8080k4ss4wk4wgo40c88g0.69.62.97.143.sslip.io",process.env.SUPABASE_SERVICE_ROLE_KEY,{cookies:{get:e=>x.get(e)?.value,set(e,r,t){x.set({name:e,value:r,...t})},remove(e,r){x.set({name:e,value:"",...r})}}}),{data:g,error:f}=await m.auth.admin.createUser({email:t,password:s,email_confirm:!0,user_metadata:{name:r,user_type:o}});if(f)return c.NextResponse.json({error:f.message},{status:400});if(!g.user)return c.NextResponse.json({error:"Falha ao criar usu\xe1rio"},{status:400});let{error:q}=await m.from("profiles").insert({id:g.user.id,name:r,email:t,user_type:o});if(q)return console.error("Erro detalhado ao criar perfil:",q),c.NextResponse.json({error:`Erro ao criar perfil: ${q.message}`},{status:400});if("client"===o){let{error:e}=await m.from("clients").insert({id:g.user.id,fitness_goals:i||null});if(e)return console.error("Erro ao criar cliente:",e),c.NextResponse.json({error:`Erro ao criar cliente: ${e.message}`},{status:400})}else{let{error:e}=await m.from("trainers").insert({id:g.user.id,specialization:a||null,experience_years:Number(p)||0,hourly_rate:Number(l)||0,bio:d||null,location:null});if(e)return console.error("Erro ao criar trainer:",e),c.NextResponse.json({error:`Erro ao criar trainer: ${e.message}`},{status:400})}return c.NextResponse.json({success:!0,message:"Conta criada com sucesso!"})}catch(e){return console.error("Erro completo:",e),c.NextResponse.json({error:e.message||"Ocorreu um erro ao criar a conta"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/register/route",pathname:"/api/register",filename:"route",bundlePath:"app/api/register/route"},resolvedPagePath:"D:\\Projetos Pessoais\\ConectaFit\\ConectaFit App - MVP 1.1\\app\\api\\register\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:x,serverHooks:m}=l,g="/api/register/route";function f(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:x})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[276,303,972,721],()=>t(4410));module.exports=s})();