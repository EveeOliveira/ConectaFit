(()=>{var e={};e.id=787,e.ids=[787],e.modules={7495:e=>{function s(e){var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}s.keys=()=>[],s.resolve=s,s.id=7495,e.exports=s},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},2260:(e,s,t)=>{"use strict";t.r(s),t.d(s,{originalPathname:()=>m,patchFetch:()=>q,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>x});var r={};t.r(r),t.d(r,{POST:()=>p});var o=t(9303),n=t(8716),a=t(670),i=t(7721),u=t(1615),c=t(7070);async function p(e){try{let{sessionId:s}=await e.json();if(!s)return c.NextResponse.json({error:"ID da sess\xe3o n\xe3o fornecido"},{status:400});let t=(0,u.cookies)(),r=(0,i.createServerClient)("http://supabasekong-hc8080k4ss4wk4wgo40c88g0.69.62.97.143.sslip.io",process.env.SUPABASE_SERVICE_ROLE_KEY,{cookies:{get:e=>t.get(e)?.value,set(e,s,r){t.set({name:e,value:s,...r})},remove(e,s){t.set({name:e,value:"",...s})}}}),{data:{session:o}}=await r.auth.getSession();if(!o)return c.NextResponse.json({error:"Usu\xe1rio n\xe3o autenticado"},{status:401});let{data:n,error:a}=await r.from("training_sessions").select("id, client_id, status").eq("id",s).single();if(a)return c.NextResponse.json({error:"Sess\xe3o n\xe3o encontrada"},{status:404});if(n.client_id!==o.user.id)return c.NextResponse.json({error:"Voc\xea n\xe3o tem permiss\xe3o para cancelar esta sess\xe3o"},{status:403});let{data:p,error:l}=await r.from("training_sessions").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",s).select();if(l)return console.error("Erro ao cancelar sess\xe3o:",l),c.NextResponse.json({error:"Erro ao cancelar sess\xe3o"},{status:500});if(!p||0===p.length)return c.NextResponse.json({error:"Falha ao atualizar sess\xe3o"},{status:500});return c.NextResponse.json({success:!0,message:"Sess\xe3o cancelada com sucesso",session:p[0]})}catch(e){return console.error("Erro ao processar solicita\xe7\xe3o:",e),c.NextResponse.json({error:e instanceof Error?e.message:"Erro interno do servidor"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/sessions/cancel/route",pathname:"/api/sessions/cancel",filename:"route",bundlePath:"app/api/sessions/cancel/route"},resolvedPagePath:"D:\\Projetos Pessoais\\ConectaFit\\ConectaFit App - MVP 1.1\\app\\api\\sessions\\cancel\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:x,serverHooks:g}=l,m="/api/sessions/cancel/route";function q(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:x})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,303,972,721],()=>t(2260));module.exports=r})();