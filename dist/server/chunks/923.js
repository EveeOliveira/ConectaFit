exports.id=923,exports.ids=[923],exports.modules={2733:(e,t,r)=>{Promise.resolve().then(r.bind(r,6931)),Promise.resolve().then(r.bind(r,8102))},9440:(e,t,r)=>{"use strict";r.d(t,{OL:()=>h,_T:()=>u,aR:()=>d,f$:()=>x,fY:()=>m,le:()=>j,xo:()=>f,yT:()=>p});var s=r(326),a=r(7577),i=r(440),o=r(7863),n=r(772);let d=i.fC;i.xz;let l=i.h_,c=a.forwardRef(({className:e,...t},r)=>s.jsx(i.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));c.displayName=i.aV.displayName;let u=a.forwardRef(({className:e,...t},r)=>(0,s.jsxs)(l,{children:[s.jsx(c,{}),s.jsx(i.VY,{ref:r,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));u.displayName=i.VY.displayName;let m=({className:e,...t})=>s.jsx("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});m.displayName="AlertDialogHeader";let f=({className:e,...t})=>s.jsx("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});f.displayName="AlertDialogFooter";let x=a.forwardRef(({className:e,...t},r)=>s.jsx(i.Dx,{ref:r,className:(0,o.cn)("text-lg font-semibold",e),...t}));x.displayName=i.Dx.displayName;let p=a.forwardRef(({className:e,...t},r)=>s.jsx(i.dk,{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",e),...t}));p.displayName=i.dk.displayName;let h=a.forwardRef(({className:e,...t},r)=>s.jsx(i.aU,{ref:r,className:(0,o.cn)((0,n.d)(),e),...t}));h.displayName=i.aU.displayName;let j=a.forwardRef(({className:e,...t},r)=>s.jsx(i.$j,{ref:r,className:(0,o.cn)((0,n.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));j.displayName=i.$j.displayName},4432:(e,t,r)=>{"use strict";r.d(t,{I:()=>o});var s=r(326),a=r(7577),i=r(7863);let o=a.forwardRef(({className:e,type:t,...r},a)=>s.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...r}));o.displayName="Input"},1048:(e,t,r)=>{"use strict";r.d(t,{_:()=>l});var s=r(326),a=r(7577),i=r(4478),o=r(9360),n=r(7863);let d=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=a.forwardRef(({className:e,...t},r)=>s.jsx(i.f,{ref:r,className:(0,n.cn)(d(),e),...t}));l.displayName=i.f.displayName},4474:(e,t,r)=>{"use strict";r.d(t,{Bw:()=>p,Ph:()=>c,Ql:()=>h,i4:()=>m,ki:()=>u});var s=r(326),a=r(7577),i=r(7146),o=r(8393),n=r(6633),d=r(2933),l=r(7863);let c=i.fC;i.ZA;let u=i.B4,m=a.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(i.xz,{ref:a,className:(0,l.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(i.JO,{asChild:!0,children:s.jsx(o.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=i.xz.displayName;let f=a.forwardRef(({className:e,...t},r)=>s.jsx(i.u_,{ref:r,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(n.Z,{className:"h-4 w-4"})}));f.displayName=i.u_.displayName;let x=a.forwardRef(({className:e,...t},r)=>s.jsx(i.$G,{ref:r,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(o.Z,{className:"h-4 w-4"})}));x.displayName=i.$G.displayName;let p=a.forwardRef(({className:e,children:t,position:r="popper",...a},o)=>s.jsx(i.h_,{children:(0,s.jsxs)(i.VY,{ref:o,className:(0,l.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...a,children:[s.jsx(f,{}),s.jsx(i.l_,{className:(0,l.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(x,{})]})}));p.displayName=i.VY.displayName,a.forwardRef(({className:e,...t},r)=>s.jsx(i.__,{ref:r,className:(0,l.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=i.__.displayName;let h=a.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(i.ck,{ref:a,className:(0,l.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(i.wU,{children:s.jsx(d.Z,{className:"h-4 w-4"})})}),s.jsx(i.eT,{children:t})]}));h.displayName=i.ck.displayName,a.forwardRef(({className:e,...t},r)=>s.jsx(i.Z0,{ref:r,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=i.Z0.displayName},7673:(e,t,r)=>{"use strict";r.d(t,{g:()=>o});var s=r(326),a=r(7577),i=r(7863);let o=a.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));o.displayName="Textarea"},8102:(e,t,r)=>{"use strict";r.d(t,{WorkoutForm:()=>E});var s=r(326),a=r(7577),i=r(2945),o=r(5047),n=r(2643),d=r(772),l=r(4432),c=r(1048),u=r(7673),m=r(4474),f=r(4215),x=r(3855),p=r(1405);let h=(0,r(6557).Z)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var j=r(8091),g=r(4770),y=r.n(g);let v={randomUUID:y().randomUUID},N=new Uint8Array(256),b=N.length,w=[];for(let e=0;e<256;++e)w.push((e+256).toString(16).slice(1));let _=function(e,t,r){if(v.randomUUID&&!t&&!e)return v.randomUUID();let s=(e=e||{}).random||(e.rng||function(){return b>N.length-16&&(y().randomFillSync(N),b=0),N.slice(b,b+=16)})();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=s[e];return t}return function(e,t=0){return w[e[t+0]]+w[e[t+1]]+w[e[t+2]]+w[e[t+3]]+"-"+w[e[t+4]]+w[e[t+5]]+"-"+w[e[t+6]]+w[e[t+7]]+"-"+w[e[t+8]]+w[e[t+9]]+"-"+w[e[t+10]]+w[e[t+11]]+w[e[t+12]]+w[e[t+13]]+w[e[t+14]]+w[e[t+15]]}(s)};var k=r(9440);function E({trainerId:e,clients:t,exercises:r,preSelectedClientId:g,workout:y}){let[v,N]=(0,a.useState)(y?.title||""),[b,w]=(0,a.useState)(y?.description||""),[E,R]=(0,a.useState)(g||y?.client_id||""),[C,S]=(0,a.useState)([]),[z,T]=(0,a.useState)(!1),[O,I]=(0,a.useState)(!0),[F,U]=(0,a.useState)(null),[A,M]=(0,a.useState)(null),[$,D]=(0,a.useState)(!1),[P,Z]=(0,a.useState)(""),[V,L]=(0,a.useState)(!1),W=(0,o.useRouter)(),q=(0,i.e)(),{toast:Y}=(0,f.pm)(),B=()=>{let e={id:`temp-${_()}`,exercise_id:"",sets:3,reps:12,rest_time:60,notes:"",order_index:C.length};S(t=>[...t,e])},G=e=>{let t=C.find(t=>t.id===e),s=t?.name||r.find(e=>e.id===t?.exercise_id)?.name||"este exerc\xedcio";M(e),Z(s),D(!0)},H=async()=>{if(A){L(!0);try{if(!A.startsWith("temp-")){console.log("Excluindo exerc\xedcio do banco de dados:",A);let e=await fetch("/api/workouts/exercises/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({exerciseId:A})});if(!e.ok){let t=await e.json();throw Error(t.error||"Erro ao excluir exerc\xedcio")}console.log("Exerc\xedcio exclu\xeddo com sucesso do banco de dados")}S(e=>e.filter(e=>e.id!==A)),Y({title:"Exerc\xedcio removido",description:"O exerc\xedcio foi removido da ficha."})}catch(e){console.error("Erro ao excluir exerc\xedcio:",e),Y({title:"Erro",description:e instanceof Error?e.message:"N\xe3o foi poss\xedvel excluir o exerc\xedcio. Tente novamente.",variant:"destructive"})}finally{M(null),D(!1),L(!1)}}},Q=(e,t,r)=>{S(s=>s.map(s=>s.id===e?{...s,[t]:r}:s))},J=async t=>{if(t.preventDefault(),!v||!E||0===C.length){Y({title:"Campos obrigat\xf3rios",description:"Preencha todos os campos obrigat\xf3rios e adicione pelo menos um exerc\xedcio.",variant:"destructive"});return}if(C.some(e=>!e.exercise_id)){Y({title:"Exerc\xedcios inv\xe1lidos",description:"Selecione um exerc\xedcio para cada item da ficha.",variant:"destructive"});return}T(!0);try{if(!q)throw Error("Cliente Supabase n\xe3o inicializado");if(y){console.log("Atualizando ficha existente:",y.id),console.log("Total de exerc\xedcios a serem salvos:",C.length);try{let{error:e}=await q.from("workout_plans").update({title:v,description:b||null,updated_at:new Date().toISOString()}).eq("id",y.id);if(e)throw console.error("Erro ao atualizar ficha:",e),e;let t=C.filter(e=>e.id.startsWith("temp-")).map((e,t)=>({workout_plan_id:y.id,exercise_id:e.exercise_id,sets:e.sets,reps:e.reps,rest_time:e.rest_time||null,notes:e.notes||null,order_index:t})),r=C.filter(e=>!e.id.startsWith("temp-")).map((e,t)=>({id:e.id,exercise_id:e.exercise_id,sets:e.sets,reps:e.reps,rest_time:e.rest_time||null,notes:e.notes||null,order_index:t}));if(console.log(`Exerc\xedcios para inserir: ${t.length}`),console.log(`Exerc\xedcios para atualizar: ${r.length}`),t.length>0){let{error:e}=await q.from("workout_exercises").insert(t);if(e)throw console.error("Erro ao inserir novos exerc\xedcios:",e),e}for(let e of r){let{error:t}=await q.from("workout_exercises").update({exercise_id:e.exercise_id,sets:e.sets,reps:e.reps,rest_time:e.rest_time,notes:e.notes,order_index:e.order_index,updated_at:new Date().toISOString()}).eq("id",e.id);if(t)throw console.error(`Erro ao atualizar exerc\xedcio ${e.id}:`,t),t}}catch(e){throw console.error("Erro durante a atualiza\xe7\xe3o da ficha:",e),e}Y({title:"Ficha atualizada",description:"A ficha de treino foi atualizada com sucesso."}),W.push(`/workouts/${y.id}`)}else{let{data:t,error:r}=await q.from("workout_plans").insert({trainer_id:e,client_id:E,title:v,description:b||null}).select();if(r)throw r;let s=t[0].id,a=C.map((e,t)=>({workout_plan_id:s,exercise_id:e.exercise_id,sets:e.sets,reps:e.reps,rest_time:e.rest_time||null,notes:e.notes||null,order_index:t})),{error:i}=await q.from("workout_exercises").insert(a);if(i)throw i;Y({title:"Ficha criada",description:"A ficha de treino foi criada com sucesso."}),W.push(`/workouts/${s}`)}}catch(e){console.error("Erro ao salvar ficha:",e),Y({title:"Erro",description:e instanceof Error?e.message:"N\xe3o foi poss\xedvel salvar a ficha de treino. Tente novamente.",variant:"destructive"})}finally{T(!1)}};return(0,s.jsxs)(s.Fragment,{children:[s.jsx("form",{onSubmit:J,children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(n.Zb,{children:[s.jsx(n.Ol,{children:s.jsx(n.ll,{children:"Informa\xe7\xf5es B\xe1sicas"})}),(0,s.jsxs)(n.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"title",children:"T\xedtulo da Ficha *"}),s.jsx(l.I,{id:"title",value:v,onChange:e=>N(e.target.value),placeholder:"Ex: Treino de Hipertrofia - Fase 1",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"description",children:"Descri\xe7\xe3o"}),s.jsx(u.g,{id:"description",value:b,onChange:e=>w(e.target.value),placeholder:"Descreva o objetivo e instru\xe7\xf5es gerais desta ficha de treino",rows:3})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"client",children:"Aluno *"}),t.length>0?(0,s.jsxs)(m.Ph,{value:E,onValueChange:R,disabled:!!y||!!g,children:[s.jsx(m.i4,{id:"client",children:s.jsx(m.ki,{placeholder:"Selecione um aluno"})}),s.jsx(m.Bw,{children:t.map(e=>s.jsx(m.Ql,{value:e.id,children:e.name},e.id))})]}):s.jsx("div",{className:"text-sm text-muted-foreground p-2 border rounded-md",children:"Voc\xea ainda n\xe3o tem alunos. V\xe1 para a p\xe1gina de alunos para adicionar alunos ou aguarde que solicitem sess\xf5es com voc\xea."})]})]})]}),E&&(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between",children:[s.jsx(n.ll,{children:"Exerc\xedcios"}),(0,s.jsxs)(d.z,{type:"button",onClick:B,variant:"outline",size:"sm",children:[s.jsx(x.Z,{className:"mr-2 h-4 w-4"}),"Adicionar Exerc\xedcio"]})]}),s.jsx(n.aY,{children:O?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):F?(0,s.jsxs)("div",{className:"text-center py-8 border rounded-md",children:[(0,s.jsxs)("p",{className:"text-red-500 mb-4",children:["Erro ao carregar exerc\xedcios: ",F]}),(0,s.jsxs)(d.z,{type:"button",variant:"outline",onClick:()=>{I(!0),U(null),window.location.reload()},children:[s.jsx(p.Z,{className:"mr-2 h-4 w-4"}),"Tentar novamente"]})]}):0===C.length?(0,s.jsxs)("div",{className:"text-center py-8 border rounded-md",children:[s.jsx("p",{className:"text-muted-foreground",children:"Nenhum exerc\xedcio adicionado"}),s.jsx(d.z,{type:"button",onClick:B,variant:"link",className:"mt-2",children:"Adicionar Exerc\xedcio"})]}):s.jsx("div",{className:"space-y-4",children:C.map((e,t)=>(0,s.jsxs)("div",{className:"border rounded-md p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(h,{className:"h-5 w-5 text-muted-foreground mr-2"}),(0,s.jsxs)("span",{className:"font-medium",children:["Exerc\xedcio ",t+1]})]}),s.jsx(d.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>G(e.id),"aria-label":"Remover exerc\xedcio",children:s.jsx(j.Z,{className:"h-4 w-4 text-destructive"})})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:`exercise-${e.id}`,children:"Exerc\xedcio *"}),(0,s.jsxs)(m.Ph,{value:e.exercise_id,onValueChange:t=>{let s=r.find(e=>e.id===t);Q(e.id,"exercise_id",t),s&&Q(e.id,"name",s.name)},children:[s.jsx(m.i4,{id:`exercise-${e.id}`,children:s.jsx(m.ki,{placeholder:"Selecione um exerc\xedcio"})}),s.jsx(m.Bw,{children:r.map(e=>s.jsx(m.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:`sets-${e.id}`,children:"S\xe9ries *"}),s.jsx(l.I,{id:`sets-${e.id}`,type:"number",min:"1",value:e.sets,onChange:t=>Q(e.id,"sets",Number.parseInt(t.target.value)||1),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:`reps-${e.id}`,children:"Repeti\xe7\xf5es *"}),s.jsx(l.I,{id:`reps-${e.id}`,type:"number",min:"1",value:e.reps,onChange:t=>Q(e.id,"reps",Number.parseInt(t.target.value)||1),required:!0})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:`rest-${e.id}`,children:"Descanso (segundos)"}),s.jsx(l.I,{id:`rest-${e.id}`,type:"number",min:"0",value:e.rest_time||"",onChange:t=>Q(e.id,"rest_time",Number.parseInt(t.target.value)||null)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:`notes-${e.id}`,children:"Observa\xe7\xf5es"}),s.jsx(l.I,{id:`notes-${e.id}`,value:e.notes||"",onChange:t=>Q(e.id,"notes",t.target.value),placeholder:"Ex: Controle a descida"})]})]})]},e.id))})}),(0,s.jsxs)(n.eW,{className:"flex justify-between",children:[s.jsx(d.z,{type:"button",variant:"outline",onClick:()=>W.back(),children:"Cancelar"}),s.jsx(d.z,{type:"submit",disabled:z||0===C.length||O||!!F,children:z?"Salvando...":y?"Atualizar Ficha":"Criar Ficha"})]})]})]})}),s.jsx(k.aR,{open:$,onOpenChange:D,children:(0,s.jsxs)(k._T,{children:[(0,s.jsxs)(k.fY,{children:[s.jsx(k.f$,{children:"Confirmar exclus\xe3o"}),(0,s.jsxs)(k.yT,{children:["Tem certeza que deseja remover ",P," da ficha? Esta a\xe7\xe3o n\xe3o pode ser desfeita."]})]}),(0,s.jsxs)(k.xo,{children:[s.jsx(k.le,{disabled:V,children:"Cancelar"}),s.jsx(k.OL,{onClick:H,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:V,children:V?"Removendo...":"Remover"})]})]})})]})}},3855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1405:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},3537:(e,t,r)=>{"use strict";r.d(t,{R:()=>s});let s=(0,r(8570).createProxy)(String.raw`D:\Projetos Pessoais\ConectaFit\ConectaFit App - MVP 1.1\components\workouts\workout-form.tsx#WorkoutForm`)},9815:(e,t,r)=>{"use strict";r.d(t,{z:()=>o});var s=r(7577),a=r(8051),i=r(5819),o=e=>{let{present:t,children:r}=e,o=function(e){var t,r;let[a,o]=s.useState(),d=s.useRef(null),l=s.useRef(e),c=s.useRef("none"),[u,m]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},s.useReducer((e,t)=>r[e][t]??e,t));return s.useEffect(()=>{let e=n(d.current);c.current="mounted"===u?e:"none"},[u]),(0,i.b)(()=>{let t=d.current,r=l.current;if(r!==e){let s=c.current,a=n(t);e?m("MOUNT"):"none"===a||t?.display==="none"?m("UNMOUNT"):r&&s!==a?m("ANIMATION_OUT"):m("UNMOUNT"),l.current=e}},[e,m]),(0,i.b)(()=>{if(a){let e;let t=a.ownerDocument.defaultView??window,r=r=>{let s=n(d.current).includes(r.animationName);if(r.target===a&&s&&(m("ANIMATION_END"),!l.current)){let r=a.style.animationFillMode;a.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===a.style.animationFillMode&&(a.style.animationFillMode=r)})}},s=e=>{e.target===a&&(c.current=n(d.current))};return a.addEventListener("animationstart",s),a.addEventListener("animationcancel",r),a.addEventListener("animationend",r),()=>{t.clearTimeout(e),a.removeEventListener("animationstart",s),a.removeEventListener("animationcancel",r),a.removeEventListener("animationend",r)}}m("ANIMATION_END")},[a,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:s.useCallback(e=>{d.current=e?getComputedStyle(e):null,o(e)},[])}}(t),d="function"==typeof r?r({present:o.isPresent}):s.Children.only(r),l=(0,a.e)(o.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(d));return"function"==typeof r||o.isPresent?s.cloneElement(d,{ref:l}):null};function n(e){return e?.animationName||"none"}o.displayName="Presence"}};