(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{162:function(e,a,s){Promise.resolve().then(s.bind(s,6907)),Promise.resolve().then(s.bind(s,2809))},2809:function(e,a,s){"use strict";s.d(a,{TrainerSearch:function(){return p}});var t=s(7437),l=s(2265),r=s(970),i=s(5186),n=s(2869),c=s(6070),o=s(3647);function d(e){let{value:a,onValueChange:s,min:r=0,max:i,step:n=1,className:c=""}=e,[o,d]=(0,l.useState)(null),m=(0,l.useRef)(null),u=e=>(e-r)/(i-r)*100,h=e=>a=>{a.preventDefault(),d(e)},x=(0,l.useCallback)(e=>{if(null===o||!m.current)return;let t=m.current.getBoundingClientRect(),l=Math.round((r+Math.max(0,Math.min(100,(e.clientX-t.left)/t.width*100))/100*(i-r))/n)*n,c=[...a];c[o]=Math.max(r,Math.min(i,l)),2===a.length&&(0===o&&c[0]>c[1]&&(c[0]=c[1]),1===o&&c[1]<c[0]&&(c[1]=c[0])),s(c)},[o,r,i,n,a,s]),p=(0,l.useCallback)(()=>{d(null)},[]);l.useEffect(()=>{if(null!==o)return document.addEventListener("mousemove",x),document.addEventListener("mouseup",p),()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",p)}},[o,x,p]);let f=2===a.length,v=u(a[0]),j=f?u(a[1]):100;return(0,t.jsx)("div",{className:"relative w-full ".concat(c),children:(0,t.jsxs)("div",{ref:m,className:"relative h-2 bg-gray-700 rounded-full cursor-pointer",children:[(0,t.jsx)("div",{className:"absolute h-2 bg-red-600 rounded-full",style:{left:f?"".concat(v,"%"):"0%",width:f?"".concat(j-v,"%"):"".concat(v,"%")}}),a.map((e,a)=>(0,t.jsx)("div",{className:"absolute w-5 h-5 bg-red-600 border-2 border-red-600 rounded-full cursor-grab active:cursor-grabbing transform -translate-x-1/2 -translate-y-1/2 top-1/2",style:{left:"".concat(u(e),"%")},onMouseDown:h(a)},a))]})})}var m=s(6815),u=s(6595),h=s(7648),x=s(5153);function p(e){let{specializations:a,userId:s}=e,[p,f]=(0,l.useState)(""),[v,j]=(0,l.useState)(""),[g,N]=(0,l.useState)([0,500]),[b,w]=(0,l.useState)(0),[y,_]=(0,l.useState)([]),[z,C]=(0,l.useState)(!1),E=(0,r.e)(),{toast:S}=(0,x.pm)();(0,l.useEffect)(()=>{k()},[]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{p||v||g[0]>0||g[1]<500||b>0?L():k()},500);return()=>clearTimeout(e)},[p,v,g,b]);let k=async()=>{C(!0);try{let{data:e,error:a}=await E.from("trainers").select("\n        id,\n        specialization,\n        experience_years,\n        hourly_rate,\n        rating,\n        bio\n      ");if(a)throw a;if(e&&e.length>0){let a=await Promise.all(e.map(async e=>{let{data:a}=await E.from("profiles").select("name, avatar_url").eq("id",e.id).single(),{data:s}=await E.from("trainer_specializations").select("\n              specializations:specialization_id (\n                name\n              )\n            ").eq("trainer_id",e.id),t=s?s.map(e=>e.specializations.name):[];return{id:e.id,name:(null==a?void 0:a.name)||"Nome n\xe3o dispon\xedvel",specialization:e.specialization,experience_years:e.experience_years,hourly_rate:e.hourly_rate,rating:e.rating,avatar_url:null==a?void 0:a.avatar_url,specializations:t}}));_(a)}}catch(e){console.error("Erro ao buscar personal trainers:",e)}finally{C(!1)}},L=async()=>{C(!0);try{let e=E.from("trainers").select("\n        id,\n        specialization,\n        experience_years,\n        hourly_rate,\n        rating,\n        bio\n      ");(g[0]>0||g[1]<500)&&(e=e.gte("hourly_rate",g[0]).lte("hourly_rate",g[1])),b>0&&(e=e.gte("rating",b));let{data:a,error:s}=await e;if(s)throw s;if(a&&a.length>0){let e=(await Promise.all(a.map(async e=>{let{data:a}=await E.from("profiles").select("name, avatar_url").eq("id",e.id).single(),{data:s}=await E.from("trainer_specializations").select("\n            specializations:specialization_id (\n              name\n            )\n          ").eq("trainer_id",e.id),t=s?s.map(e=>e.specializations.name):[];return{id:e.id,name:(null==a?void 0:a.name)||"Nome n\xe3o dispon\xedvel",specialization:e.specialization,experience_years:e.experience_years,hourly_rate:e.hourly_rate,rating:e.rating,avatar_url:null==a?void 0:a.avatar_url,specializations:t}}))).filter(e=>{let a=""===p||e.name.toLowerCase().includes(p.toLowerCase()),s=""===v||"all"===v||e.specializations.some(e=>e.toLowerCase().includes(v.toLowerCase()));return a&&s});_(e)}else _([])}catch(e){console.error("Erro ao buscar personal trainers:",e),_([])}finally{C(!1)}},M=async e=>{try{let a=new Date;a.setDate(a.getDate()+7);let{error:t}=await E.from("training_sessions").insert({client_id:s,trainer_id:e,session_date:a.toISOString(),duration:60,status:"pending"});if(t)throw t;S({title:"Solicita\xe7\xe3o enviada",description:"O personal trainer foi notificado da sua solicita\xe7\xe3o."})}catch(e){console.error("Erro ao solicitar sess\xe3o:",e),S({title:"Erro",description:"N\xe3o foi poss\xedvel enviar a solicita\xe7\xe3o. Tente novamente.",variant:"destructive"})}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(c.Zb,{className:"bg-[#18181b] border-[#27272a] rounded-xl",children:[(0,t.jsx)(c.Ol,{className:"pb-4",children:(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:"Filtros"})}),(0,t.jsx)(c.aY,{className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"search",className:"text-white font-medium",children:"Nome"}),(0,t.jsx)(i.I,{id:"search",placeholder:"Buscar por nome",value:p,onChange:e=>f(e.target.value),className:"bg-[#27272a] border-[#3f3f46] text-white placeholder:text-[#71717a] focus:border-red-600"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{htmlFor:"specialization",className:"text-white font-medium",children:"Especializa\xe7\xe3o"}),(0,t.jsxs)(o.Ph,{value:v,onValueChange:j,children:[(0,t.jsx)(o.i4,{className:"bg-[#27272a] border-[#3f3f46] text-white",children:(0,t.jsx)(o.ki,{placeholder:"Todas"})}),(0,t.jsxs)(o.Bw,{className:"bg-[#18181b] border-[#27272a]",children:[(0,t.jsx)(o.Ql,{value:"all",className:"text-white hover:bg-[#27272a]",children:"Todas"}),a.map(e=>(0,t.jsx)(o.Ql,{value:e.name,className:"text-white hover:bg-[#27272a]",children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{className:"text-white font-medium",children:"Pre\xe7o por hora (R$)"}),(0,t.jsxs)("div",{className:"pt-4",children:[(0,t.jsx)(d,{value:g,onValueChange:e=>N(e),max:500,step:10}),(0,t.jsxs)("div",{className:"flex justify-between mt-2 text-sm text-[#a1a1aa]",children:[(0,t.jsxs)("span",{children:["R$ ",g[0]]}),(0,t.jsxs)("span",{children:["R$ ",g[1]]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m._,{className:"text-white font-medium",children:"Avalia\xe7\xe3o m\xednima"}),(0,t.jsxs)("div",{className:"pt-4",children:[(0,t.jsx)(d,{value:[b],onValueChange:e=>w(e[0]),max:5,step:.5}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),(0,t.jsxs)("span",{className:"ml-1 text-sm text-[#a1a1aa]",children:[b," ou mais"]})]})]})]})]})}),(0,t.jsx)(c.eW,{className:"flex justify-end pt-4 border-t border-[#27272a]",children:(0,t.jsx)(n.z,{variant:"outline",onClick:()=>{f(""),j(""),N([0,500]),w(0),k()},className:"border-[#3f3f46] text-white hover:bg-[#27272a]",children:"Limpar filtros"})})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:z?(0,t.jsx)("div",{className:"col-span-full flex justify-center py-8",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):y.length>0?y.map(e=>(0,t.jsxs)(c.Zb,{className:"bg-[#18181b] border-[#27272a] rounded-xl overflow-hidden",children:[(0,t.jsx)("div",{className:"aspect-[4/3] relative bg-[#27272a]",children:e.avatar_url?(0,t.jsx)("img",{src:e.avatar_url||"/placeholder.svg",alt:e.name,className:"object-cover w-full h-full"}):(0,t.jsx)("div",{className:"w-full h-full bg-[#27272a] flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-4xl font-bold text-[#71717a]",children:e.name.charAt(0)})})}),(0,t.jsxs)(c.aY,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsx)("h3",{className:"font-bold text-lg text-white",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),(0,t.jsx)("span",{className:"ml-1 text-sm text-white",children:e.rating.toFixed(1)})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("p",{className:"text-sm text-[#a1a1aa]",children:[e.experience_years," ",1===e.experience_years?"ano":"anos"," de experi\xeancia"]}),(0,t.jsxs)("p",{className:"text-sm font-medium text-white",children:["R$ ",e.hourly_rate.toFixed(2),"/hora"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-3",children:e.specializations.map((e,a)=>(0,t.jsx)("span",{className:"px-2 py-1 bg-[#27272a] text-[#a1a1aa] text-xs rounded-full",children:e},a))})]})]}),(0,t.jsxs)(c.eW,{className:"p-6 pt-0 flex gap-2",children:[(0,t.jsx)(n.z,{variant:"outline",className:"w-full border-[#3f3f46] text-white hover:bg-[#27272a]",asChild:!0,children:(0,t.jsx)(h.default,{href:"/trainers/".concat(e.id),children:"Ver perfil"})}),(0,t.jsx)(n.z,{className:"w-full bg-red-600 hover:bg-red-700 text-white",onClick:()=>M(e.id),children:"Solicitar"})]})]},e.id)):(0,t.jsx)("div",{className:"col-span-full text-center py-8",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Nenhum personal trainer encontrado"})})})]})}},6595:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(9763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])}},function(e){e.O(0,[972,804,452,878,70,282,84,934,971,117,744],function(){return e(e.s=162)}),_N_E=e.O()}]);